\ProvidesPackage{secctex}

\RequirePackage{mathpartir}
\RequirePackage{todonotes}
\RequirePackage{unlist}
\RequirePackage{hyperref}
\RequirePackage{letltxmacro}

\RequirePackage{latexsym,amsmath,amssymb}
\RequirePackage{stmaryrd}
%% stmry doesn't have a bold defined, so define bold to be normal
\SetSymbolFont{stmry}{bold}{U}{stmry}{m}{n}

\RequirePackage{amsbsy}
\RequirePackage{upgreek}
\RequirePackage{url}
\RequirePackage{mathrsfs}

\RequirePackage{amsthm}

% ACM recommended packages
\RequirePackage{microtype}
\RequirePackage[utf8]{inputenc}
\RequirePackage[T1]{fontenc}

% Automagic title case

\RequirePackage{titlecaps}
\Addlcwords{for a is but and with of in as the etc on to if}
\LetLtxMacro{\titleS}{\title}
\LetLtxMacro{\sectionS}{\section}
\LetLtxMacro{\subsectionS}{\subsection}
\LetLtxMacro{\subsubsectionS}{\subsubsection}

\renewcommand{\title}[2][]{\titleS[#1]{\titlecap{#2}}}
\renewcommand{\section}[2][]{\sectionS[#1]{\titlecap{#2}}}
\renewcommand{\subsection}[2][]{\subsectionS[#1]{\titlecap{#2}}}
\renewcommand{\subsubsection}[2][]{\subsubsectionS[#1]{\titlecap{#2}}}

%% omitthis
\newcommand{\omitthis}[1]{#1}
\DeclareOption{omit}{
  \renewcommand{\omitthis}[1]{}
}

%% todo
\LetLtxMacro{\oldtodo}{\todo}

\renewcommand{\todo}[2][]{\omitthis{\oldtodo[#1]{#2}}}

\DeclareOption{todo}{
  \renewcommand{\todo}[2][]{\oldtodo[#1]{#2}}
}

%% ACM/SIGPLAN format
\newif\ifsecc@sigplan
\secc@sigplantrue

\DeclareOption{nosigplan}{\secc@sigplanfalse}

%% balance the last page?
\newif\ifsecc@balance
\secc@balancefalse

\DeclareOption{balance}{\secc@balancetrue}

%% techrpt or paper?
\newif\ifsecc@techrpt
\secc@techrptfalse

\DeclareOption{techrpt}{\secc@techrpttrue}
\DeclareOption{paper}{\secc@techrptfalse}

\ProcessOptions\relax

\ifsecc@sigplan
  \RequirePackage{natbib}
  \bibpunct{[}{]}{,}{n}{}{,}
  \let\cite=\citep
\fi

\ifsecc@balance
  \RequirePackage{flushend}
\fi

\ifsecc@techrpt
  \RequirePackage{fullpage}
  \renewcommand{\baselinestretch}{1.0}
\else
  \ifsecc@sigplan
  \renewcommand{\bibsection}{
    \makeatletter
    \section*{\refname\@mkboth{\MakeUppercase{\refname}}{\MakeUppercase{\refname}}}
    \makeatother
  }
  \fi
\fi

\input{defs}
\endinput
